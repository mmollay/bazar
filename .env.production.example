# Bazar Marketplace - Production Environment Configuration
# Copy this file to .env.production and update with your values

#################################################
# APPLICATION SETTINGS
#################################################
APP_ENV=production
APP_DEBUG=false
APP_URL=https://yourdomain.com
APP_NAME="Bazar Marketplace"
APP_VERSION=1.0.0

# JWT Configuration
JWT_SECRET=your-super-secret-jwt-key-change-this
JWT_ALGORITHM=HS256
JWT_EXPIRATION=3600

# Timezone
APP_TIMEZONE=UTC

#################################################
# DATABASE CONFIGURATION
#################################################
# Primary Database (Master)
DB_HOST=mysql-master
DB_PORT=3306
DB_NAME=bazar_marketplace
DB_USER=bazar_user
DB_PASS=your-secure-database-password

# MySQL Root Password
MYSQL_ROOT_PASSWORD=your-mysql-root-password

# Read Replica (Slave) Database
DB_SLAVE_HOST=mysql-slave
DB_SLAVE_PORT=3306
DB_SLAVE_USER=bazar_user
DB_SLAVE_PASS=your-secure-database-password

# Replication Settings
REPLICATION_USER=replication
REPLICATION_PASSWORD=your-replication-password

#################################################
# REDIS CONFIGURATION
#################################################
REDIS_HOST=redis-cluster
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DATABASE=0

# Session Configuration
SESSION_DRIVER=redis
SESSION_LIFETIME=120
SESSION_ENCRYPT=true
SESSION_FILES=/var/www/html/storage/sessions
SESSION_CONNECTION=default

# Cache Configuration
CACHE_DRIVER=redis
CACHE_PREFIX=bazar_cache

#################################################
# ELASTICSEARCH CONFIGURATION
#################################################
ELASTICSEARCH_HOST=elasticsearch-master
ELASTICSEARCH_PORT=9200
ELASTICSEARCH_SCHEME=http
ELASTICSEARCH_USER=
ELASTICSEARCH_PASS=
ELASTICSEARCH_INDEX=bazar_marketplace

#################################################
# EMAIL CONFIGURATION
#################################################
MAIL_HOST=smtp.gmail.com
MAIL_PORT=587
MAIL_USER=your-email@domain.com
MAIL_PASS=your-app-specific-password
MAIL_ENCRYPTION=tls
MAIL_FROM_ADDRESS=noreply@yourdomain.com
MAIL_FROM_NAME="Bazar Marketplace"

#################################################
# FILE STORAGE CONFIGURATION
#################################################
# Local Storage
STORAGE_DRIVER=local
STORAGE_PATH=/var/www/html/uploads

# S3 Configuration (for file uploads)
AWS_ACCESS_KEY_ID=your-aws-access-key
AWS_SECRET_ACCESS_KEY=your-aws-secret-key
AWS_DEFAULT_REGION=us-east-1
AWS_BUCKET=your-uploads-bucket
AWS_URL=https://s3.amazonaws.com

# CDN Configuration
CDN_URL=https://cdn.yourdomain.com
CDN_ENABLED=true

#################################################
# SSL/TLS CONFIGURATION
#################################################
DOMAIN=yourdomain.com
LETSENCRYPT_EMAIL=admin@yourdomain.com
USE_LETSENCRYPT=true
SSL_REDIRECT=true

#################################################
# BACKUP CONFIGURATION
#################################################
# S3 Backup Settings
S3_BACKUP_BUCKET=your-backup-bucket
S3_BACKUP_REGION=us-east-1
BACKUP_ENCRYPTION_KEY=your-backup-encryption-key
BACKUP_RETENTION_DAYS=30
BACKUP_SCHEDULE="0 2 * * *"

# Backup Notification
BACKUP_SLACK_WEBHOOK=https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK
BACKUP_EMAIL_ALERTS=admin@yourdomain.com

#################################################
# MONITORING CONFIGURATION
#################################################
# Prometheus
PROMETHEUS_ENABLED=true
PROMETHEUS_PORT=9090

# Grafana
GRAFANA_PASSWORD=your-secure-grafana-password
GRAFANA_PORT=3000

# ELK Stack
ELK_ENABLED=true
KIBANA_PORT=5601

# New Relic (Optional)
NEW_RELIC_LICENSE_KEY=your-new-relic-license-key
NEW_RELIC_APP_NAME="Bazar Marketplace Production"

#################################################
# SECURITY CONFIGURATION
#################################################
# API Rate Limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_MAX_ATTEMPTS=100
RATE_LIMIT_DECAY_MINUTES=1

# CORS Settings
CORS_ALLOWED_ORIGINS=https://yourdomain.com,https://www.yourdomain.com
CORS_ALLOWED_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_ALLOWED_HEADERS=Content-Type,Authorization,X-Requested-With
CORS_EXPOSED_HEADERS=
CORS_MAX_AGE=86400
CORS_SUPPORTS_CREDENTIALS=true

# Content Security Policy
CSP_ENABLED=true
CSP_REPORT_ONLY=false

#################################################
# PAYMENT CONFIGURATION
#################################################
# Stripe
STRIPE_PUBLIC_KEY=pk_live_your_stripe_public_key
STRIPE_SECRET_KEY=sk_live_your_stripe_secret_key
STRIPE_WEBHOOK_SECRET=whsec_your_webhook_secret

# PayPal
PAYPAL_MODE=live
PAYPAL_CLIENT_ID=your_paypal_client_id
PAYPAL_CLIENT_SECRET=your_paypal_client_secret

#################################################
# THIRD-PARTY INTEGRATIONS
#################################################
# Google Services
GOOGLE_CLIENT_ID=your-google-client-id
GOOGLE_CLIENT_SECRET=your-google-client-secret
GOOGLE_ANALYTICS_ID=UA-XXXXXXXX-X
GOOGLE_MAPS_API_KEY=your-google-maps-api-key

# Social Media
FACEBOOK_APP_ID=your-facebook-app-id
FACEBOOK_APP_SECRET=your-facebook-app-secret

TWITTER_CONSUMER_KEY=your-twitter-consumer-key
TWITTER_CONSUMER_SECRET=your-twitter-consumer-secret

# Push Notifications
FIREBASE_SERVER_KEY=your-firebase-server-key
FIREBASE_SENDER_ID=your-firebase-sender-id

#################################################
# LOGGING CONFIGURATION
#################################################
LOG_CHANNEL=stack
LOG_LEVEL=info
LOG_SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK

# Log Rotation
LOG_MAX_FILES=30
LOG_MAX_SIZE=100MB

#################################################
# PERFORMANCE CONFIGURATION
#################################################
# PHP Configuration
PHP_MEMORY_LIMIT=512M
PHP_MAX_EXECUTION_TIME=300
PHP_MAX_INPUT_VARS=3000
PHP_UPLOAD_MAX_FILESIZE=32M
PHP_POST_MAX_SIZE=32M

# OPcache Settings
OPCACHE_MEMORY_CONSUMPTION=256
OPCACHE_MAX_ACCELERATED_FILES=10000
OPCACHE_VALIDATE_TIMESTAMPS=0

# MySQL Tuning
MYSQL_INNODB_BUFFER_POOL_SIZE=1G
MYSQL_MAX_CONNECTIONS=200
MYSQL_QUERY_CACHE_SIZE=128M

# Redis Tuning
REDIS_MAXMEMORY=512mb
REDIS_MAXMEMORY_POLICY=allkeys-lru

#################################################
# QUEUE CONFIGURATION
#################################################
QUEUE_CONNECTION=redis
QUEUE_DRIVER=redis
QUEUE_PREFIX=bazar_queue

# Queue Workers
QUEUE_WORKER_INSTANCES=3
QUEUE_WORKER_MEMORY=512
QUEUE_WORKER_TIMEOUT=60
QUEUE_WORKER_SLEEP=3
QUEUE_WORKER_TRIES=3

#################################################
# LOAD BALANCER CONFIGURATION
#################################################
# HAProxy
HAPROXY_STATS_PASSWORD=your-haproxy-stats-password
HAPROXY_STATS_PORT=8404

# Load Balancing
LB_METHOD=roundrobin
LB_HEALTH_CHECK_INTERVAL=30
LB_HEALTH_CHECK_TIMEOUT=10

#################################################
# SCALING CONFIGURATION
#################################################
# Auto-scaling
AUTO_SCALE_ENABLED=true
SCALE_UP_THRESHOLD=80
SCALE_DOWN_THRESHOLD=20
MIN_REPLICAS=2
MAX_REPLICAS=10
SCALE_CHECK_INTERVAL=30

# Resource Limits
CONTAINER_MEMORY_LIMIT=1G
CONTAINER_CPU_LIMIT=1.0
CONTAINER_MEMORY_RESERVATION=512M
CONTAINER_CPU_RESERVATION=0.5

#################################################
# DEVELOPMENT/TESTING OVERRIDES
#################################################
# Set to true for development
DEBUG_MODE=false
DEBUG_BAR_ENABLED=false

# Testing
TESTING_DATABASE=bazar_testing
TESTING_REDIS_DATABASE=1

#################################################
# FEATURE FLAGS
#################################################
FEATURE_REGISTRATION_ENABLED=true
FEATURE_EMAIL_VERIFICATION=true
FEATURE_TWO_FACTOR_AUTH=true
FEATURE_SOCIAL_LOGIN=true
FEATURE_MARKETPLACE_ENABLED=true
FEATURE_CHAT_ENABLED=true
FEATURE_NOTIFICATIONS_ENABLED=true
FEATURE_ANALYTICS_ENABLED=true
FEATURE_ADMIN_PANEL_ENABLED=true

#################################################
# CUSTOM APPLICATION SETTINGS
#################################################
# Business Logic
MAX_UPLOAD_SIZE=32
ALLOWED_FILE_TYPES=jpg,jpeg,png,gif,pdf,doc,docx
MAX_FILES_PER_ARTICLE=10
ARTICLE_EXPIRY_DAYS=30
SEARCH_RESULTS_PER_PAGE=20

# Moderation
AUTO_MODERATE_CONTENT=true
MANUAL_APPROVAL_REQUIRED=false
SPAM_DETECTION_ENABLED=true

# Notifications
EMAIL_NOTIFICATIONS_ENABLED=true
PUSH_NOTIFICATIONS_ENABLED=true
SMS_NOTIFICATIONS_ENABLED=false

# Analytics
TRACK_USER_BEHAVIOR=true
TRACK_SEARCH_QUERIES=true
TRACK_ARTICLE_VIEWS=true

#################################################
# MAINTENANCE MODE
#################################################
MAINTENANCE_MODE=false
MAINTENANCE_MESSAGE="We're currently performing maintenance. Please check back soon."
MAINTENANCE_ALLOWED_IPS=127.0.0.1,192.168.1.0/24

#################################################
# HEALTH CHECK CONFIGURATION
#################################################
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_PATH=/health
HEALTH_CHECK_DATABASE=true
HEALTH_CHECK_REDIS=true
HEALTH_CHECK_ELASTICSEARCH=true
HEALTH_CHECK_EXTERNAL_SERVICES=true